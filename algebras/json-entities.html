<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="manual">
<meta name="generator" content="Paradox, paradox-material-theme=0.6.0, mkdocs-material=3.0.3">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="">
<meta name="lang:search.pipeline.stopwords" content="true">
<meta name="lang:search.pipeline.trimmer" content="true">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="manual">
<link rel="shortcut icon" href="../assets/images/favicon.png">
<title>JSON Entities · endpoints</title>
<link rel="stylesheet" href="../assets/stylesheets/application.451f80e5.css">
<link rel="stylesheet" href="../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../lib/prettify/prettify.css">
<script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="../assets/fonts/font-awesome.css">
<link rel="stylesheet" href="../assets/fonts/material-icons.css">
<link rel="stylesheet" href="../assets/stylesheets/paradox-material-theme.css">
<link rel="stylesheet" href="../snippets.css">
</head>
<body
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../index.html" title="endpoints" class="md-header-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
endpoints
</span>
<span class="md-header-nav__topic">
JSON Entities
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
<label class="md-icon md-search__icon" for="__search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/julienrf/endpoints"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
julienrf/endpoints
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<a href="../index.html" title="endpoints" class="md-nav__button md-logo">
<span class="md-nav__button md-logo">
<i class="md-icon">local_library</i>
</a>
<a href="../index.html" title="endpoints">
endpoints
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/julienrf/endpoints"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
julienrf/endpoints
</div>
</a>

</div>
<ul>
  <li><a href="../use-cases.html" class="page">Use Cases</a></li>
  <li><a href="../quick-start.html" class="page">Quick start</a></li>
  <li><a href="../design.html" class="page">Design in a nutshell</a></li>
  <li><a href="../algebras-and-interpreters.html" class="page">Algebras and interpreters</a>
  <ul>
    <li><a href="../algebras/endpoints.html" class="page"><code>Endpoints</code></a></li>
    <li><a href="../algebras/json-entities.html" class="active page">JSON Entities</a></li>
    <li><a href="../algebras/json-schemas.html" class="page">JSON Schemas</a></li>
    <li><a href="../algebras/chunked-entities.html" class="page">Chunked Entities</a></li>
    <li><a href="../algebras/assets.html" class="page">Assets</a></li>
    <li><a href="../algebras/mux-endpoints.html" class="page">Multiplexed Endpoints</a></li>
    <li><a href="../interpreters/akka-http.html" class="page">Akka HTTP</a></li>
    <li><a href="../interpreters/play.html" class="page">Play framework</a></li>
    <li><a href="../interpreters/http4s.html" class="page">http4s</a></li>
    <li><a href="../interpreters/scalajs-web.html" class="page">Scala.js web client</a></li>
    <li><a href="../interpreters/scalaj-http.html" class="page">scalaj-http</a></li>
    <li><a href="../interpreters/sttp.html" class="page">sttp</a></li>
    <li><a href="../interpreters/openapi.html" class="page">OpenAPI</a></li>
    <li><a href="../interpreters/circe.html" class="page">Circe</a></li>
    <li><a href="../interpreters/play-json.html" class="page">Play JSON</a></li>
  </ul></li>
  <li><a href="../guides.html" class="page">Guides</a>
  <ul>
    <li><a href="../guides/tupler.html" class="page"><code>Tupler</code></a></li>
    <li><a href="../guides/custom-authentication.html" class="page">Application-specific authentication</a></li>
  </ul></li>
  <li><a href="../comparison.html" class="page">Comparison with similar tools</a></li>
  <li><a href="../talks.html" class="page">Talks and Publications</a></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../algebras/json-entities.html#json-entities" class="header">JSON Entities</a>
  <ul>
    <li><a href="../algebras/json-entities.html#the-jsonentities-algebras" class="header">The <code>JsonEntities</code> algebras</a></li>
    <li><a href="../algebras/json-entities.html#jsonentitiesfromschemas" class="header"><code>JsonEntitiesFromSchemas</code></a></li>
    <li><a href="../algebras/json-entities.html#jsonentitiesfromcodecs" class="header"><code>JsonEntitiesFromCodecs</code></a></li>
  </ul></li>
</ul>
</nav>

</nav>
<ul style="display: none">
<li class="md-nav__item md-version" id="project.version">
<label class="md-nav__link" for="__version">
<i class="md-icon" title="Version">label_outline</i> 0.15.0
</label>
</li>
</ul>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">Table of contents</label>
<ul>
  <li><a href="../algebras/json-entities.html#json-entities" class="header">JSON Entities</a>
  <ul>
    <li><a href="../algebras/json-entities.html#the-jsonentities-algebras" class="header">The <code>JsonEntities</code> algebras</a></li>
    <li><a href="../algebras/json-entities.html#jsonentitiesfromschemas" class="header"><code>JsonEntitiesFromSchemas</code></a></li>
    <li><a href="../algebras/json-entities.html#jsonentitiesfromcodecs" class="header"><code>JsonEntitiesFromCodecs</code></a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<h1><a href="#json-entities" name="json-entities" class="anchor"><span class="anchor-link"></span></a>JSON Entities</h1>
<p>The <a href="endpoints.html"><code>Endpoints</code></a> algebra does not provide support for describing requests and responses containing JSON entities. The reason for this is that there are different algebra modules to use depending on your needs.</p>
<p>The following diagram summarizes which algebra to use in which case:</p>
<p><img src="/json-decision.svg" alt="json-decision" /></p>
<p>The first question to ask is “do I want to publish documentation of my endpoints?”. In order to document the JSON entities of your requests and responses you need a JSON schema for them, that’s why you have to use the <code>JsonEntitiesFromSchemas</code> algebra. See <a href="json-entities.html#jsonentitiesfromschemas">below</a> for more details.</p>
<p>In case you don’t need to document the schema of your JSON entities, the second question to ask is “do I implement both a client and a server?”. If this is the case, then you need to be able to both encode and decode each JSON entity (an entity encoded by the server will be decoded by the client, and <em>vice versa</em>). To ensure that encoders and decoders are consistent together both have to be provided at the definition site of your endpoints, that’s why you should use the <code>JsonEntitiesFromCodecs</code> algebra. See <a href="json-entities.html#jsonentitiesfromcodecs">below</a> for more details.</p>
<p>Last, if you answered “no” to both questions, it means that your endpoints will only be served by your server and you don’t need an (abstract) algebra to describe them: you can directly use the <code>JsonEntitiesFromEncodersAndDecoders</code> interpreter for your specific server. With this module, you will have to provide an encoder for JSON responses, and a decoder for JSON requests.</p><div class="callout note "><div class="callout-title">Note</div>
<p>Note that in a same service some endpoints might fall in a category, while some other endpoints might fall in a different category. For instance, if you want to publish an OpenAPI descriptor for your service, the endpoints to include in the documentation should be defined with the <code>JsonEntitiesFromSchemas</code> algebra, but the endpoint that serves the OpenAPI document itself will be defined with a <code>JsonEntitiesFromEncodersAndDecoders</code> module. See the <a href="../interpreters/openapi.html">OpenAPI interpreter</a> documentation for an example.</p></div>
<p>The next section introduces general information about the <code>JsonEntities</code> hierarchy, and the remaining sections provide more details on how to use <code>JsonEntitiesFromSchemas</code> and <code>JsonEntitiesFromCodecs</code>.</p>
<h2><a href="#the-jsonentities-algebras" name="the-jsonentities-algebras" class="anchor"><span class="anchor-link"></span></a>The <code>JsonEntities</code> algebras</h2>
<pre class="prettyprint"><code class="language-scala">&quot;org.julienrf&quot; %% &quot;endpoints-algebra&quot; % &quot;0.15.0&quot;
</code></pre>
<p><a href="/api/endpoints/algebra/JsonEntities.html">API documentation</a></p>
<p>The following diagram shows the relations between the three aforementioned algebras, <code>JsonEntities</code>, <code>JsonEntitiesFromCodecs</code>, and <code>JsonEntitiesFromSchemas</code>, and their relations with the other algebras:</p>
<p><img src="json-entities.svg" /></p>
<p>The <code>JsonEntities</code> algebra adds to the <code>Endpoints</code> algebra the capability to describe JSON entities in requests and responses. The <code>JsonEntitiesFromCodecs</code> algebra refines the <code>JsonEntities</code> algebra by aligning the request and response entities to the same <code>JsonCodec</code> type. Finally, the <code>JsonEntitiesFromSchemas</code> algebra refines the <code>JsonEntities</code> algebra by aligning the request and response entities to the same <code>JsonSchema</code> type.</p>
<p>The <code>JsonEntities</code> module (and its specializations) enriches the <code>Endpoints</code> algebra with new constructors for request and response entities. For instance, here is how to define an endpoint taking in its request entity a JSON document for creating an user, and returning in its response entity the created user:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/julienrf/endpoints/tree/0.15.0/algebras/algebra/src/test/scala/endpoints/algebra/JsonEntitiesDocs.scala#L15-L18" target="_blank" title="Go to snippet source"></a><code class="language-scala">endpoint(
  post(path / &quot;user&quot;, jsonRequest[CreateUser]),
  ok(jsonResponse[User])
)</code></pre>
<p>The <code>jsonRequest[A]</code> constructor defines a JSON request entity containing a value of type <code>A</code>, provided that there exists an implicit <code>JsonRequest[A]</code> instance. Similarly, the <code>jsonResponse[A]</code> constructor defines a JSON response entity containing a value of type <code>A</code> provided that there exists an implicit <code>JsonResponse[A]</code> instance.</p>
<p>The <code>JsonRequest[A]</code> and <code>JsonResponse[A]</code> types are kept abstract in the <code>JsonEntities</code> algebra. They mean that a value of type <code>A</code> can be serialized in a JSON request or a JSON response, respectively.</p>
<p>The various specializations of the <code>JsonEntities</code> algebra refine the <code>JsonRequest[A]</code> and <code>JsonResponse[A]</code> types.</p>
<p>The <code>JsonEntitiesFromSchemas</code> algebra fixes both types to the same <code>JsonSchema[A]</code> type, which comes from the <a href="json-schemas.html"><code>JsonSchemas</code></a> algebra (see <a href="json-entities.html#jsonentitiesfromschemas">below</a> for more details).</p>
<p>The <code>JsonEntitiesFromCodecs</code> algebra fixes both types to a same <code>JsonCodec[A]</code> type, which can refer to Circe’s codec or Play JSON’s codecs according to the variant of <code>JsonEntitiesFromCodecs</code> that you use (see <a href="json-entities.html#jsonentitiesfromcodecs">below</a> for more details).</p>
<p>Documentation interpreters fix both types to be a JSON schema for <code>A</code>.</p>
<p>Last, the <code>JsonEntitiesFromEncodersAndDecoders</code> server interpreters fix the <code>JsonRequest[A]</code> type to a JSON decoder for <code>A</code>, and the <code>JsonResponse[A]</code> type to a JSON encoder for <code>A</code>.</p>
<h2><a href="#jsonentitiesfromschemas" name="jsonentitiesfromschemas" class="anchor"><span class="anchor-link"></span></a><code>JsonEntitiesFromSchemas</code></h2>
<pre class="prettyprint"><code class="language-scala">&quot;org.julienrf&quot; %% &quot;endpoints-algebra&quot; % &quot;0.15.0&quot;
</code></pre>
<p><a href="/api/endpoints/algebra/JsonEntitiesFromSchemas.html">API documentation</a></p>
<p>This algebra merges the <code>JsonEntities</code> algebra and the <a href="json-schemas.html"><code>JsonSchemas</code> algebra</a> and aligns both the <code>JsonRequest[A]</code> and <code>JsonResponse[A]</code> types to be <code>JsonCodec[A]</code>, which is itself defined to the <code>JsonSchema[A]</code> type provided by the <code>JsonSchemas</code> algebra:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/julienrf/endpoints/tree/0.15.0/algebras/algebra/src/main/scala/endpoints/algebra/JsonEntities.scala#L80" target="_blank" title="Go to snippet source"></a><code class="language-scala">type JsonCodec[A] = JsonSchema[A]</code></pre>
<p>This means that you have to define such a <code>JsonSchema[A]</code> implicit value (as explained in the <code>JsonSchemas</code> documentation) for each type <code>A</code> that you want to carry as a JSON entity.</p>
<p>These schemas can then be interpreted as documentation (by applying the <code>endpoints.openapi.JsonEntitiesFromSchemas</code> interpreter), or codecs (by applying a corresponding interpreter for your client or server, e.g. <code>endpoints.akkahttp.server.JsonEntitiesFromSchemas</code> to use an Akka HTTP server).</p>
<h2><a href="#jsonentitiesfromcodecs" name="jsonentitiesfromcodecs" class="anchor"><span class="anchor-link"></span></a><code>JsonEntitiesFromCodecs</code></h2>
<pre class="prettyprint"><code class="language-scala">&quot;org.julienrf&quot; %% &quot;endpoints-algebra&quot; % &quot;0.15.0&quot;
</code></pre>
<p><a href="/api/endpoints/algebra/JsonEntitiesFromCodecs.html">API documentation</a></p>
<p>In case you don’t need to document the JSON schemas of your request and response entities, the <code>JsonEntitiesFromCodecs</code> family of algebras is the preferred approach. These algebras fix both the <code>JsonRequest</code> and <code>JsonResponse</code> types to a same (abstract) <code>JsonCodec</code> type:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/julienrf/endpoints/tree/0.15.0/algebras/algebra/src/main/scala/endpoints/algebra/JsonEntities.scala#L53" target="_blank" title="Go to snippet source"></a><code class="language-scala">type JsonCodec[A]</code></pre>
<p>By using the same codec type for both types ensures that the encoding and decoding are consistent.</p>
<p>Generally, you want to use a <code>JsonEntitiesFromCodecs</code> algebra that fixes this <code>JsonCodec</code> type to a concrete type. An example is <a href="/api/endpoints/algebra/playjson/JsonEntitiesFromCodecs.html"><code>endpoints.algebra.playjson.JsonEntitiesFromCodecs</code></a>, which aligns the <code>JsonCodec</code> type with Play’s <code>Format</code> type:</p>
<pre class="prettyprint"><a class="icon go-to-source" href="https://github.com/julienrf/endpoints/tree/0.15.0/algebras/algebra-playjson/src/main/scala/endpoints/algebra/playjson/JsonEntitiesFromCodecs.scala#L63" target="_blank" title="Go to snippet source"></a><code class="language-scala">type JsonCodec[A] = Format[A]</code></pre>
<p>The Circe analoguous is <a href="/api/endpoints/algebra/circe/JsonEntitiesFromCodecs.html"><code>endpoints.algebra.circe.JsonEntitiesFromCodecs</code></a>.</p>
<p>These algebras are provided by the following dependencies:</p>
<pre class="prettyprint"><code class="language-scala">// Provides endpoints.algebra.circe.JsonEntitiesFromCodecs
&quot;org.julienrf&quot; %% &quot;endpoints-algebra-circe&quot; % &quot;0.15.0&quot;
// Provides endpoints.algebra.playjson.JsonEntitiesFromCodecs
&quot;org.julienrf&quot; %% &quot;endpoints-algebra-playjson&quot; % &quot;0.15.0&quot;
</code></pre>
<p>To interpret endpoints defined with such algebras, apply any interpreter named <code>JsonEntitiesFromCodecs</code> that matches your <a href="../algebras-and-interpreters.html#interpreters">family</a> of interpreters. For instance, if you use interpreters from the <code>endpoints.xhr</code> package (ie. the Scala.js web interpreters), you should use the <code>endpoints.xhr.JsonEntitiesFromCodecs</code> interpreter.</p>
</div>
<div>
<a href="https://github.com/julienrf/endpoints/tree/0.15.0/documentation/manual/src/paradox/algebras/json-entities.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
0.15.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../algebras/endpoints.html" title="Endpoints" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
Endpoints
</span>
</div>
</a>
<a href="../algebras/json-schemas.html" title="JSON Schemas" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
JSON Schemas
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/julienrf/endpoints" class="md-footer-social__link fa fa-github"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../assets/javascripts/application.583bbe55.js"></script>
<script src="../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../."}})</script>
<script type="text/javascript" src="../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
